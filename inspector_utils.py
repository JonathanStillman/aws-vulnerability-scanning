import boto3
from datetime import datetime  # Import the datetime module

def start_assessment_runs(templates, inspector_client, template_prefix):
    """
    Start assessment runs for each assessment template.

    Parameters:
    - templates: List of assessment template ARNs
    - inspector_client: AWS Inspector client
    - template_prefix: Prefix for assessment run name
    """
    for template_arn in templates:
        response = inspector_client.start_assessment_run(
            assessmentTemplateArn=template_arn,
            assessmentRunName=f'{template_prefix}_{datetime.now().strftime("%Y%m%d%H%M%S")}'
        )
        assessment_run_arn = response['assessmentRunArn']
        print(f"Assessment Run {assessment_run_arn} started for template {template_arn}")

def retrieve_assessment_results(assessment_run_arn, inspector_client):
    """
    Retrieve assessment results for a specific assessment run.

    Parameters:
    - assessment_run_arn: ARN of the assessment run
    - inspector_client: AWS Inspector client

    Returns:
    - dict: Assessment results
    """
    results = inspector_client.describe_findings(
        findingArns=inspector_client.list_findings(assessmentRunArns=[assessment_run_arn])['findingArns']
    )
    return results
